(this.webpackJsonpcontext=this.webpackJsonpcontext||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),c=n(6),r=n.n(c),u=n(2),s=n(1),l=n(7),i={books:[],loader:!1,error:!1,errorMessage:"",author:"",title:"",isUpdateButtonClicked:!1},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;switch(n){case"ADD_BOOKS":return Object(s.a)(Object(s.a)({},e),{},{books:[].concat(Object(l.a)(e.books),[o])});case"REMOVE_BOOKS":return Object(s.a)(Object(s.a)({},e),{},{books:e.books.filter((function(e){return e.id!==o}))});case"FETCH_BOOKLIST_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{books:o});case"SHOW_LOADER":return Object(s.a)(Object(s.a)({},e),{},{loader:!0});case"REMOVE_LOADER":return Object(s.a)(Object(s.a)({},e),{},{loader:!1});case"SHOW_ERROR":return Object(s.a)(Object(s.a)({},e),{},{error:!0,errorMessage:o});case"HIDE_ERROR":return Object(s.a)(Object(s.a)({},e),{},{error:!1,errorMessage:""});case"SET_INPUT_AUTHOR":return Object(s.a)(Object(s.a)({},e),{},{author:o});case"SET_INPUT_TITLE":return Object(s.a)(Object(s.a)({},e),{},{title:o});case"GET_SINGLE_BOOKLIST_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{author:o.author,title:o.title,isUpdateButtonClicked:!0});default:return e}},f=function(e){return{type:"ADD_BOOKS",payload:e}},O=function(e){return{type:"REMOVE_BOOKS",payload:e}},h=function(e){return{type:"FETCH_BOOKLIST_SUCCESS",payload:e}},E=function(e){return{type:"GET_SINGLE_BOOKLIST_SUCCESS",payload:e}},j=Object(o.createContext)(),m=function(e){var t=function(){var e=Object(o.useReducer)(b,i),t=Object(u.a)(e,2),n=t[0],a=t[1];return[n,Object(o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.method,n=void 0===t?"GET":t,o=e.params,c=void 0===o?{}:o,r=[];return"GET"===n&&fetch("https://test-projects-dacb2.firebaseio.com/todo.json").then((function(e){return e.json()})).then((function(e){console.log(e),e&&Object.entries(e).forEach((function(e){var t=Object(u.a)(e,2),n=t[0],o=t[1];r.push(Object(s.a)({id:n},o))})),a(h(r))})).catch((function(e){var t=e.message;console.log(t)})),"POST"===n&&fetch("https://test-projects-dacb2.firebaseio.com/todo.json",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log(e),a(f(Object(s.a)(Object(s.a)({},c),{},{id:e.name})))})).catch((function(e){return console.log(e)})),"DELETE"===n&&fetch("https://test-projects-dacb2.firebaseio.com/todo/".concat(c,"/.json"),{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){return e.json()})).then((function(e){console.log(e),a(O(c))})).catch((function(e){return console.log(e)})),"UPDATE"===n&&fetch("https://test-projects-dacb2.firebaseio.com/todo/".concat(c,"/.json"),{method:"UPDATE",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){return e.json()})).then((function(e){console.log(e),a(O(c))})).catch((function(e){return console.log(e)})),"id"===n&&fetch("https://test-projects-dacb2.firebaseio.com/todo/".concat(c,"/.json"),{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){return e.json()})).then((function(e){a(E(e))})).catch((function(e){return console.log(e)})),function(){return console.log("Just wipe me out")}}),[])]}(),n=Object(u.a)(t,2),c=n[0],r=n[1];return Object(o.useEffect)((function(){return r(),function(){return console.log("Please remove me")}}),[r]),a.a.createElement(j.Provider,{value:{state:c,fetchData:r}},e.children)};var d=function(e){var t=Object(o.useContext)(j).state;return a.a.createElement("nav",null,a.a.createElement("h1",null,"My Booklist on react hooks"),a.a.createElement("p",null,"Currently we have ",t.books.length," books "))};var p=function(e){var t=Object(o.useContext)(j),n=t.state,c=t.fetchData,r=Object(o.useState)(!1),s=Object(u.a)(r,2),l=s[0],i=s[1],b=function(){i(!l)};return a.a.createElement("div",{className:"book-list"},n.books.length>0?a.a.createElement("ul",null,n.books.map((function(e){var t=e.id,n=e.title,o=e.author;return a.a.createElement("li",{key:t,className:"booklist__item"},a.a.createElement("div",{className:"content"},a.a.createElement("div",{className:"title"},l&&a.a.createElement("input",{type:"text",value:n,onChange:function(){return null}})||n),a.a.createElement("div",{className:"author"},o)),a.a.createElement("button",{onClick:b},"Update"),a.a.createElement("button",{onClick:function(){return c({method:"DELETE",params:t})},className:"remove_btn"},"X")," ")}))):a.a.createElement("div",null,"No books found"))},v=function(){var e=Object(o.useContext)(j),t=e.state,n=e.fetchData,c=Object(o.useState)(""),r=Object(u.a)(c,2),s=r[0],l=r[1],i=Object(o.useState)(""),b=Object(u.a)(i,2),f=b[0],O=b[1],h=Object(o.useRef)(null),E=Object(o.useRef)(null),m=Object(o.useRef)(null);Object(o.useEffect)((function(){h.current.focus()}),[t.books]);var d=function(e){e.preventDefault(),n({method:"POST",params:{title:s,author:f}}),l(""),O("")};return a.a.createElement("form",{onSubmit:d},a.a.createElement("input",{name:"bookName",placeholder:"Enter book Name ",value:s,ref:h,onChange:function(e){return l(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&E.current.focus()},required:!0}),a.a.createElement("input",{name:"bookAuthor",placeholder:"Enter book Author",ref:E,onChange:function(e){return O(e.target.value)},value:f,onKeyDown:function(e){"Enter"===e.key&&m.current.focus()},required:!0}),a.a.createElement("button",{type:"submit",onKeyDown:function(e){d(e)},ref:m},"Submit"))};var S=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(m,null,a.a.createElement(d,null),a.a.createElement(v,null),a.a.createElement(p,null)))};n(13);r.a.render(a.a.createElement(S,null),document.getElementById("root"))},8:function(e,t,n){e.exports=n(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.ff656dcd.chunk.js.map